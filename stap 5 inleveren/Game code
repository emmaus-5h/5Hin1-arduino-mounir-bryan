/***************************************** Game Startcode met toestansdiagrammen Emmauscollege v20201114GEE*****************************************/ /***************************************** libraries die je gebruikt LCD met 2 regels van 16 karakters (de RGB backlit kan niet van kleur worden veranderd) https://www.arduino.cc/reference/en/libraries/grove-lcd-rgb-backlight/ *****************************************/#include <Wire.h>#include "rgb_lcd.h" rgb_lcd lcd; /***************************************** variabelen die je gebruikt maken *****************************************/// gebruikte pinnenconst int pinLedA = 13; // pin van LED voor speler 1const int pinKnopRood = 10; // pin van knop voor start spelconst int pinKnopGroen = 9; // pin van knop voor speler 2 // variabelen om waarden van sensoren en actuatoren te onthoudenint knopRood = 0;int knopGroen = 0; // variabelen voor de toestandenconst int STARTSIGNAAL = 1; // tel af tot spel startconst int WACHT_OP_KNOP_IN = 2; // speel het spelconst int GEEF_PUNT = 3; // laat zien wie de winnaar isconst int TOON_SCORE = 4; // laat het eind totaal punten zienint toestand = STARTSIGNAAL;unsigned long toestandStartTijd = 0;unsigned long speelStartTijd = 0; // overige variabelenint score = 0; /***************************************** functies die je gebruikt maken *****************************************/// code die steeds wordt uitgevoerd in toestand TELAFvoid telafLoop() { digitalWrite(pinLedA, HIGH); // tel af} // code die steeds wordt uitgevoerd in toestand SPEELvoid speelLoop() { digitalWrite(pinLedA, LOW); // speel spel} // code die steeds wordt uitgevoerd in toestand SPEELvoid winLoop() { // toon wie gewonnen heeft}void eindLoop() { } /***************************************** setup() en loop() *****************************************/ void setup() { // enable console en stuur opstartbericht Serial.begin(9600); Serial.println("Game start"); // zet pinmode voor leds pinMode(pinLedA, OUTPUT); // zet pinmode voor knoppen pinMode(pinKnopRood, INPUT); pinMode(pinKnopGroen, INPUT); // set up the LCD's number of columns and rows: lcd.begin(16, 2); //lcd.setRGB(colorR, colorG, colorB); // Print a message to the LCD. lcd.print("hello, world!"); delay(1000); // wacht zodat je ziet dat het display werkt} void loop() { // lees sensorwaarden knopRood = digitalRead(pinKnopRood); // ingedrukt is HIGH knopGroen = digitalRead(pinKnopGroen); // bepaal toestand if (toestand == STARTSIGNAAL) { score = 0; lcd.clear(); lcd.setCursor(0, 1); lcd.print("Press red"); telafLoop(); if (knopRood == HIGH) { // 2 seconden voorbij toestandStartTijd = millis(); speelStartTijd = millis(); toestand = WACHT_OP_KNOP_IN; Serial.println("Nieuwe toestand: WACHT_OP_KNOP_IN"); } } if (toestand == WACHT_OP_KNOP_IN) { lcd.clear();
